<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Confirmation - VibeZone</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Top Bar -->
    <div class="top-bar">
        <div class="container">
            <div class="top-bar-left">
                <a href="tel:+233123456789"><i class="fas fa-phone"></i> +233 123 456 789</a>
                <a href="mailto:info@vibezone.com"><i class="fas fa-envelope"></i> info@vibezone.com</a>
            </div>
            <div class="top-bar-right">
                <div class="language-selector">
                    English <i class="fas fa-chevron-down"></i>
                </div>
                <a href="login.html">Login</a>
                <a href="register.html">Register</a>
                <div class="cart-info">
                    <a href="cart.html">
                        <i class="fas fa-shopping-cart"></i> Cart (<span id="cart-count">0</span>)
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Header (same as index.html) -->
    <header class="main-header">
        <div class="container">
            <div class="logo">
                <h1><a href="index.html">VibeZone</a></h1>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="shop.html">Shop</a></li>
                    <li><a href="shop.html?category=cars">Cars</a></li>
                    <li><a href="shop.html?category=houses">Houses</a></li>
                    <li><a href="shop.html?category=phones">Phones</a></li>
                    <li><a href="shop.html?category=watches">Watches</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
            <div class="header-icons">
                <a href="#"><i class="fas fa-search"></i></a>
                <a href="wishlist.html"><i class="far fa-heart"></i></a>
                <a href="cart.html" class="icon-badge">
                    <i class="fas fa-shopping-cart"></i>
                    <span id="header-cart-count">0</span>
                </a>
                <a href="account.html"><i class="far fa-user"></i></a>
            </div>
            <div class="mobile-menu-toggle">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1>Order Confirmation</h1>
            <div class="breadcrumb">
                <a href="index.html">Home</a>
                <span class="separator">/</span>
                <span class="current">Order Confirmation</span>
            </div>
        </div>
    </section>

    <!-- Confirmation Section -->
    <section class="confirmation-section">
        <div class="container">
            <div class="confirmation-content">
                <div class="confirmation-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2>Thank You for Your Order!</h2>
                <p class="confirmation-message">Your order has been placed successfully. We've sent you an email with your order details.</p>
                
                <div class="order-details">
                    <h3>Order Details</h3>
                    <div class="order-info">
                        <div class="order-info-row">
                            <span>Order Number:</span>
                            <span id="confirmation-order-id">-</span>
                        </div>
                        <div class="order-info-row">
                            <span>Date:</span>
                            <span id="confirmation-date">-</span>
                        </div>
                        <div class="order-info-row">
                            <span>Total:</span>
                            <span id="confirmation-total">-</span>
                        </div>
                        <div class="order-info-row">
                            <span>Payment Method:</span>
                            <span>Paystack</span>
                        </div>
                    </div>
                </div>
                
                <div class="order-summary">
                    <h3>Order Summary</h3>
                    <div class="order-summary-content">
                        <div class="order-summary-header">
                            <span>Product</span>
                            <span>Total</span>
                        </div>
                        <div id="confirmation-items">
                            <!-- Order items will be loaded dynamically -->
                        </div>
                        <div class="order-summary-row subtotal">
                            <span>Subtotal</span>
                            <span id="confirmation-subtotal">-</span>
                        </div>
                        <div class="order-summary-row shipping">
                            <span>Shipping</span>
                            <span id="confirmation-shipping">-</span>
                        </div>
                        <div class="order-summary-row total">
                            <span>Total</span>
                            <span id="confirmation-order-total">-</span>
                        </div>
                    </div>
                </div>
                
                <!-- Update the confirmation actions section to make the WhatsApp button optional -->
                <div class="confirmation-actions">
                    <a href="shop.html" class="btn btn-primary">Continue Shopping</a>
                    <a href="#" id="whatsapp-order" class="btn btn-outline">
                        <i class="fab fa-whatsapp"></i> Resend to WhatsApp
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer (same as index.html) -->
    <footer class="main-footer">
        <div class="container">
            <div class="footer-widgets">
                <div class="footer-widget">
                    <h3 class="footer-title">About VibeZone</h3>
                    <p>VibeZone is your premium destination for luxury cars, exclusive properties, cutting-edge phones, and elegant watches. We provide a curated selection of high-quality products for the discerning customer.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="footer-widget">
                    <h3 class="footer-title">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact Us</a></li>
                        <li><a href="terms.html">Terms & Conditions</a></li>
                        <li><a href="privacy.html">Privacy Policy</a></li>
                        <li><a href="faq.html">FAQs</a></li>
                    </ul>
                </div>
                <div class="footer-widget">
                    <h3 class="footer-title">Categories</h3>
                    <ul class="footer-links">
                        <li><a href="shop.html?category=cars">Cars</a></li>
                        <li><a href="shop.html?category=houses">Houses</a></li>
                        <li><a href="shop.html?category=phones">Phones</a></li>
                        <li><a href="shop.html?category=watches">Watches</a></li>
                        <li><a href="shop.html">All Products</a></li>
                    </ul>
                </div>
                <div class="footer-widget">
                    <h3 class="footer-title">Contact Info</h3>
                    <ul class="contact-info">
                        <li><i class="fas fa-map-marker-alt"></i> 123 Main Street, Accra, Ghana</li>
                        <li><i class="fas fa-phone"></i> +233 123 456 789</li>
                        <li><i class="fas fa-envelope"></i> info@vibezone.com</li>
                        <li><i class="fas fa-clock"></i> Monday-Friday: 9am to 5pm</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 VibeZone. All Rights Reserved.</p>
                <div class="payment-methods">
                    <i class="fab fa-cc-visa"></i>
                    <i class="fab fa-cc-mastercard"></i>
                    <i class="fab fa-cc-amex"></i>
                    <i class="fab fa-cc-paypal"></i>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/products.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/checkout.js"></script>
    <!-- Update the script to reflect that WhatsApp is now sent automatically -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get order ID from URL
            const urlParams = new URLSearchParams(window.location.search);
            const orderId = urlParams.get('order_id');
            
            if (orderId) {
                // Load order details
                loadOrderDetails(orderId);
            } else {
                // Redirect to home if no order ID
                window.location.href = 'index.html';
            }
            
            // WhatsApp button (now for resending)
            const whatsappBtn = document.getElementById('whatsapp-order');
            if (whatsappBtn) {
                whatsappBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    if (orderId) {
                        sendOrderToWhatsApp(getOrderById(orderId));
                        window.productUtils.showNotification("Order details sent to WhatsApp.", "success");
                    }
                });
            }
        });
        
        // Load order details
        function loadOrderDetails(orderId) {
            const order = getOrderById(orderId);
            
            if (!order) {
                window.location.href = 'index.html';
                return;
            }
            
            // Update order details
            document.getElementById('confirmation-order-id').textContent = order.id;
            document.getElementById('confirmation-date').textContent = new Date(order.date).toLocaleDateString();
            document.getElementById('confirmation-total').textContent = window.productUtils.formatPrice(order.total);
            
            // Update order items
            const itemsElement = document.getElementById('confirmation-items');
            let html = '';
            
            order.items.forEach(item => {
                const subtotal = item.price * item.quantity;
                html += `
                    <div class="order-summary-item">
                        <span>${item.name} × ${item.quantity}</span>
                        <span>${window.productUtils.formatPrice(subtotal)}</span>
                    </div>
                `;
            });
            
            itemsElement.innerHTML = html;
            
            // Update totals
            document.getElementById('confirmation-subtotal').textContent = window.productUtils.formatPrice(order.subtotal);
            document.getElementById('confirmation-shipping').textContent = order.shipping === 0 ? 'Free' : window.productUtils.formatPrice(order.shipping);
            document.getElementById('confirmation-order-total').textContent = window.productUtils.formatPrice(order.total);
        }
    </script>
</body>
</html>
